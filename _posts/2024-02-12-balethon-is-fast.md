---
categories: [What Is Balethon]
tags: []
---

<h2 align="right" dir="rtl">بلتون سریع است</h2>

<p align="right" dir="rtl">بلتون برای افزایش سرعت اپلیکیشن شما از تکنولوژی هایی مثل asyncio و multi threading استفاده میکنه</p>

<h3 align="right" dir="rtl">asyncio</h3>

<p align="right" dir="rtl">تکنولوژی asyncio به بلتون اجازه میده که ارسال درخواست به سرور بله اون رو کند نکنه</p>

<p align="right" dir="rtl">برای مثال این کد رو در نظر بگیرید</p>

```python
message = bot.send_message(1234567890, "...")
message.edit_text("Hello")
```

<p align="right" dir="rtl">توی این کد ما یک پیام با متن ... به یک کاربر فرستادیم<br/>
بعد بلافاصله متن همون پیام رو به Hello ویرایش دادیم  </p>

<p align="right" dir="rtl">یعنی ما اینجا دو تا درخواست به سرور بله زدیم<br/>
یک درخواست ارسال پیام و یک درخواست ویرایش پیام</p>

<p align="right" dir="rtl">حالا برای مثال فرض کنید هرکدوم از این درخواست های ما به بله حدود 1 ثانیه طول بکشه<br/>
یعنی این کد در کل 2 ثانیه طول میکشه<br/>
پس اینجا کد ما در مجموع 2 ثانیه کندتر میشه</p>

<p align="right" dir="rtl">اگر همین کد رو با asyncio بزنیم این شکلی میشه</p>

```python
message = await bot.send_message(1234567890, "...")
await message.edit_text("Hello")
```

<p align="right" dir="rtl">این کد هم دقیقا کار کد قبلی رو انجام میده<br/>
و این کد هم 2 ثانیه طول میکشه<br/>
اما فرقش با کد قبلی اینه که توی مدتی که ما در انتظار پاسخ از طرف بله هستیم اگر کار دیگه ای برای انجام دادن هست پایتون میره و اون کار رو انجام میده<br/>
پس اون 2 ثانیه ما درواقع اینجا هدر نمیره<br/>
و خاصیت asyncio همینه که نمیذاره وقت ما در انتضار پاسخ ازیک تابع هدر بره</p>

<p align="right" dir="rtl">حالا اگر دقت کرده باشید هنوز یک موردی هست<br/>
ما در انتظار برگشت پاسخ برای درخواست ارسال پیام میمونیم چون نیاز داریم که پاسخش رو بگیریم که ادامه کدمون رو اجرا کنیم<br/>
چون پاسخش یک پیامه که بعد میخوایم اون رو ویرایش کنیم<br/>
اما نیازی به انتظار به پاسخ درخواست ویرایش پیام نداریم<br/>
پس میتونیم در انتظار پاسخش نمونیم</p>

<p align="right" dir="rtl">روش انجام این کار با asyncio</p>

```python
from asyncio import create_task

message = await bot.send_message(1234567890, "...")
task = create_task(message.edit_text("Hello"))

...

await task
```

<p align="right" dir="rtl">اینجا ما با استفاده از asyncio.create_task یک درخواست میزنیم و در انتظار پاسخش نمیمونیم و میریم ادامه کد رو اجرا میکنیم</p>

<p align="right" dir="rtl">یعنی کدی که در این مثال به جای ... قرار بدید بعد از 1 ثانیه اجرا میشه به جای 2 ثانیه<br/>
چون در انتظار پاسخ درخواست دوم نموندیم</p>

<p align="right" dir="rtl">فقط یادتون باشه که آخر کار await task رو قرار بدید وگرنه ممکنه کار تا آخر انجام نشه<br/>
اگر تابع تموم بشه و کار هنوز انجام نشده باشه دیگه ادامه پیدا نمیکنه</p>

<h3 align="right" dir="rtl">multi threading</h3>

<p align="right" dir="rtl">تکنولوژی multi threading به بلتون اجازه میده که کارها رو همزمان انجام بده</p>

<p align="right" dir="rtl">هر کار در یک thread انجام میشه<br/>
در حالت عادی توانایی دستگاه شما بررسی میشه و با توجه به اون یک تعدادی از threadها ساخته میشن<br/>
و به همون تعداد کار همزمان میتونن انجام بشن<br/>
برای مثال فرض کنید که بلتون 8 تا thread برای شما ساخته باشه<br/>
یعنی اگر 8 نفر به بات شما پیام بدن بات همه رو همزمان جواب میده<br/>
اما اگه 10 نفر همزمان پیام بدن به 8 نفر جواب داده میشه و 2 نفر توی صف هستن تا 2 تا thread بیکار بشن تا برن جواب اون ها رو بدن</p>

<p align="right" dir="rtl">میتونید به این شکل تعداد threadها رو به دلخواه خودتون تغییر بدید</p>

```python
from balethon import Client

bot = Client("TOKEN",  max_workers=50)
```

<p align="right" dir="rtl">در اینجا ما max_workers رو برابر با 50 قرار دادیم<br/>
یعنی بلتون 50 تا thread در اختیار داره و میتونه تا 50 کار همزمان انجام بده</p>

<br>

<p align="center" dir="rtl">پست بعدی: <a href="https://balethon.ir/posts/balethon-is-flexible">Balethon Is Flexible</a></p>